{% extends "base.html" %}
{% block title %}History{% endblock %}
{% block content %}
 <script>
        function reload() {
            window.location.href = window.location.href;
        }
        var secs = 10;
        var ms = 1000 * secs;
        setInterval(reload, ms);
    </script>
  <h1>History</h1>
    <table >
        <thead>
          <tr>
            <td>
              Water per day {{ reading.data | int }} L
            </td>
            <td>
                Flow (L/min)
            </td> 
            <td>
                Valves:
            </td> 
            {% for valve in schema.Valves %}
              <td>
                {{valve + 1}}
              </td>
            {% endfor %}

            <td>
                Time
            </td>
        </tr>
        </thead>
        <tbody>
        {% for reading in readings %}
          <tr>
            <td>
            {{ reading.data | int }}
            </td>
            <td>
            </td>
            {% for valve in schema.Valves %}
              <td>
              <div>
                  <input type="checkbox" disabled="disabled" {{ 'checked' if valve in reading.valves else '' }}/>
              </div>
              </td>
            {% endfor %}
            <td>
            {{ reading.time.strftime('%m/%d/%Y %H:%M') }}
            </td>
          </tr>
        {% endfor %}
    </tbody>
    </table>
{% endblock %}
